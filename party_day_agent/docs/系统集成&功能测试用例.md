# 主题党日智能体系统集成&功能测试用例

## 1. 概述

本测试用例文档详细描述了主题党日活动智能助手项目的系统集成测试和功能测试方案。测试的主要目标是验证系统的各个组件是否能够正确集成工作，并确保系统功能符合需求规格。

## 2. 测试范围

测试范围包括以下方面：

- 系统集成测试：验证各组件之间的集成是否正常
- 功能测试：验证系统的各项功能是否符合需求
- 接口测试：验证系统的API接口是否正常工作
- 用户界面测试：验证前端界面的功能和体验

## 3. 测试环境

测试环境配置：

- 操作系统：Ubuntu 22.04
- Python版本：3.10
- FastAPI版本：0.100.0
- httpx版本：0.24.0
- Docker版本：24.0
- 浏览器：Chrome 116.0、Firefox 115.0
- 测试工具：pytest、requests

## 4. 系统集成测试用例

### 4.1 主智能体与工具智能体集成测试

| 测试用例ID | 测试目标 | 测试步骤 | 预期结果 |
|------------|----------|----------|----------|
| TC-INT-001 | Planner与Venue服务集成 | 1. 启动Planner和Venue服务<br>2. Planner调用Venue服务<br>3. 检查调用结果 | Planner成功调用Venue服务并获取场地数据 |
| TC-INT-002 | Planner与Calendar服务集成 | 1. 启动Planner和Calendar服务<br>2. Planner调用Calendar服务<br>3. 检查调用结果 | Planner成功调用Calendar服务并获取日历检查结果 |
| TC-INT-003 | Planner与Notify服务集成 | 1. 启动Planner和Notify服务<br>2. Planner调用Notify服务<br>3. 检查调用结果 | Planner成功调用Notify服务并获取通知发送状态 |
| TC-INT-004 | Planner与Summary服务集成 | 1. 启动Planner和Summary服务<br>2. Planner调用Summary服务<br>3. 检查调用结果 | Planner成功调用Summary服务并获取总结生成状态 |

### 4.2 前后端集成测试

| 测试用例ID | 测试目标 | 测试步骤 | 预期结果 |
|------------|----------|----------|----------|
| TC-INT-005 | 前端与Planner服务集成 | 1. 启动前端HTTP服务器和Planner服务<br>2. 前端发送API请求<br>3. 检查请求处理和响应 | 前端成功发送请求，Planner服务正确处理并返回结果 |

### 4.3 完整系统集成测试

| 测试用例ID | 测试目标 | 测试步骤 | 预期结果 |
|------------|----------|----------|----------|
| TC-INT-006 | 完整工作流集成 | 1. 启动所有服务<br>2. 模拟用户输入活动信息<br>3. 检查完整工作流执行过程<br>4. 验证最终输出结果 | 系统完整工作流正常执行，生成有效的活动方案 |

## 5. 功能测试用例

### 5.1 活动方案生成功能

| 测试用例ID | 测试目标 | 测试步骤 | 预期结果 |
|------------|----------|----------|----------|
| TC-FUNC-001 | 基本活动方案生成 | 1. 输入有效的活动主题、日期、地点、人数<br>2. 提交请求<br>3. 检查生成的活动方案 | 生成包含场地、日程安排等信息的完整活动方案 |
| TC-FUNC-002 | 不同主题活动方案 | 1. 输入不同的活动主题<br>2. 提交请求<br>3. 检查生成的活动方案 | 根据不同主题生成相应的活动方案 |
| TC-FUNC-003 | 不同人数活动方案 | 1. 输入不同的参与人数<br>2. 提交请求<br>3. 检查生成的活动方案 | 根据不同人数推荐合适的场地和安排 |

### 5.2 场地检索功能

| 测试用例ID | 测试目标 | 测试步骤 | 预期结果 |
|------------|----------|----------|----------|
| TC-FUNC-004 | 按地理位置检索场地 | 1. 输入不同的地理位置<br>2. 提交请求<br>3. 检查场地检索结果 | 返回该地理位置附近的合适场地 |
| TC-FUNC-005 | 按主题检索场地 | 1. 输入不同的活动主题<br>2. 提交请求<br>3. 检查场地检索结果 | 返回与主题相关的合适场地 |
| TC-FUNC-006 | 按人数检索场地 | 1. 输入不同的参与人数<br>2. 提交请求<br>3. 检查场地检索结果 | 返回容量符合人数要求的场地 |
| TC-FUNC-007 | 场地检索API失败降级 | 1. 模拟高德地图API不可用<br>2. 提交场地检索请求<br>3. 检查返回结果 | 返回模拟的场地数据 |

### 5.3 日历检查功能

| 测试用例ID | 测试目标 | 测试步骤 | 预期结果 |
|------------|----------|----------|----------|
| TC-FUNC-008 | 日程冲突检测 | 1. 准备包含冲突事件的日历文件<br>2. 提交日历检查请求<br>3. 检查冲突检测结果 | 正确检测到日程冲突 |
| TC-FUNC-009 | 无冲突日程检测 | 1. 准备无冲突的日历文件<br>2. 提交日历检查请求<br>3. 检查冲突检测结果 | 正确识别无冲突日程 |
| TC-FUNC-010 | 日历检查API失败降级 | 1. 模拟日历服务不可用<br>2. 提交日历检查请求<br>3. 检查返回结果 | 返回模拟的日历检查结果 |

### 5.4 通知发送功能

| 测试用例ID | 测试目标 | 测试步骤 | 预期结果 |
|------------|----------|----------|----------|
| TC-FUNC-011 | 企业微信通知发送 | 1. 配置有效的企业微信机器人Webhook<br>2. 提交通知发送请求<br>3. 检查通知发送结果 | 成功发送企业微信通知 |
| TC-FUNC-012 | 通知内容本地保存 | 1. 提交通知发送请求<br>2. 检查本地保存的通知文件<br>3. 验证文件内容 | 通知内容正确保存到本地文件 |
| TC-FUNC-013 | 通知发送API失败降级 | 1. 模拟企业微信API不可用<br>2. 提交通知发送请求<br>3. 检查返回结果 | 通知内容保存到本地，返回降级成功信息 |

### 5.5 总结生成功能

| 测试用例ID | 测试目标 | 测试步骤 | 预期结果 |
|------------|----------|----------|----------|
| TC-FUNC-014 | 活动总结生成 | 1. 提交活动总结生成请求<br>2. 检查生成的Word文档<br>3. 验证文档内容 | 成功生成包含活动信息的Word文档 |
| TC-FUNC-015 | 总结生成API失败降级 | 1. 模拟总结生成服务不可用<br>2. 提交总结生成请求<br>3. 检查返回结果 | 返回模拟的总结生成结果 |

## 6. API接口测试用例

### 6.1 Planner服务API测试

| 测试用例ID | 测试目标 | 测试步骤 | 预期结果 |
|------------|----------|----------|----------|
| TC-API-001 | /run接口测试 | 1. 发送POST请求到/run接口<br>2. 检查响应状态码和内容 | 返回200状态码和有效的活动方案 |
| TC-API-002 | /run接口参数验证 | 1. 发送缺少必填参数的请求<br>2. 检查错误处理 | 返回422状态码和参数验证错误 |
| TC-API-003 | /run接口性能测试 | 1. 并发发送多个请求<br>2. 检查响应时间和成功率 | 平均响应时间<2秒，成功率>99% |

### 6.2 工具服务API测试

| 测试用例ID | 测试目标 | 测试步骤 | 预期结果 |
|------------|----------|----------|----------|
| TC-API-004 | /call接口测试 | 1. 发送POST请求到工具服务的/call接口<br>2. 检查响应状态码和内容 | 返回200状态码和有效的工具调用结果 |
| TC-API-005 | /call接口无效工具测试 | 1. 发送包含无效工具名称的请求<br>2. 检查错误处理 | 返回404状态码和工具不存在错误 |

## 7. 用户界面测试用例

### 7.1 界面功能测试

| 测试用例ID | 测试目标 | 测试步骤 | 预期结果 |
|------------|----------|----------|----------|
| TC-UI-001 | 表单输入验证 | 1. 输入无效的活动信息<br>2. 点击提交按钮<br>3. 检查表单验证提示 | 显示适当的表单验证错误提示 |
| TC-UI-002 | 提交请求功能 | 1. 输入有效的活动信息<br>2. 点击提交按钮<br>3. 检查请求处理状态 | 显示请求处理状态，最终显示活动方案 |
| TC-UI-003 | 结果展示功能 | 1. 成功生成活动方案<br>2. 检查结果展示界面<br>3. 验证展示内容 | 正确展示活动方案的各项信息 |

### 7.2 界面兼容性测试

| 测试用例ID | 测试目标 | 测试步骤 | 预期结果 |
|------------|----------|----------|----------|
| TC-UI-004 | 浏览器兼容性测试 | 1. 在不同浏览器中打开前端页面<br>2. 测试各项功能<br>3. 检查界面显示 | 在所有支持的浏览器中功能正常，界面显示一致 |
| TC-UI-005 | 响应式设计测试 | 1. 在不同屏幕尺寸的设备上打开页面<br>2. 检查界面布局<br>3. 测试各项功能 | 界面布局适应不同屏幕尺寸，功能正常 |

## 8. 测试执行计划

### 8.1 测试阶段划分

1. **单元测试阶段**：各组件开发完成后进行单元测试
2. **集成测试阶段**：组件间集成完成后进行集成测试
3. **功能测试阶段**：系统功能实现完成后进行功能测试
4. **系统测试阶段**：系统整体开发完成后进行系统测试
5. **回归测试阶段**：问题修复后进行回归测试

### 8.2 测试资源分配

- **测试人员**：2名测试工程师
- **开发人员**：3名开发工程师（参与测试支持）
- **测试环境**：1套集成测试环境，1套系统测试环境
- **测试工具**：pytest、requests、Chrome DevTools

### 8.3 测试进度计划

| 测试阶段 | 计划开始日期 | 计划结束日期 |
|----------|--------------|--------------|
| 单元测试 | 2025-09-07 | 2025-09-07 |
| 集成测试 | 2025-09-07 | 2025-09-07 |
| 功能测试 | 2025-09-07 | 2025-09-07 |
| 系统测试 | 2025-09-07 | 2025-09-07 |
| 回归测试 | 2025-09-07 | 2025-09-07 |

## 9. 测试结果记录与分析

### 9.1 测试结果记录

测试结果应详细记录以下信息：

- 测试用例ID和名称
- 测试执行日期和测试人员
- 测试环境信息
- 测试步骤执行情况
- 实际测试结果
- 测试结论（通过/失败）
- 问题描述（如果测试失败）

### 9.2 问题跟踪与管理

测试过程中发现的问题应通过问题跟踪系统进行管理，包括：

- 问题ID和描述
- 问题严重程度
- 问题优先级
- 问题发现日期和发现人
- 问题修复日期和修复人
- 问题状态
- 验证结果

### 9.3 测试报告生成

测试完成后，应生成详细的测试报告，包括：

- 测试概述
- 测试范围
- 测试环境
- 测试执行情况
- 测试结果统计
- 问题分析
- 结论与建议

## 10. 测试结束标准

测试结束的标准包括：

1. 所有计划的测试用例已执行
2. 测试通过率达到95%以上
3. 所有严重和高优先级的问题已修复并验证通过
4. 测试报告已生成并审批通过
5. 系统满足上线要求

---
版本：v1.0.0
编制日期：2025-09-07